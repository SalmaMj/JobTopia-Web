{% extends 'base.html.twig' %}
{% block header %}

<!DOCTYPE html>
<html>
<head>

    <meta charset="UTF-8">
    <title>{% block title %}Liste des offres{% endblock %}</title>
   {% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/owl.theme.default.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
    

        
 <style>
    
    .form-control {
  border-radius: 0;
  border: 1px solid #ccc;
 }
.btn-primary {
  background-color: #007bff;
  border-color: #007bff;
  border-radius: 0;
      }
      .btn-primary:hover {
        background-color: #0056b3;
        border-color: #0056b3;
      }
     
  
      .search-form h1 {
        font-size: 36px;
        font-weight: bold;
        margin-top: 0;
        margin-bottom: 20px;
      }
      .search-form .form-group {
        margin-bottom: 10px;
      }
      .search-form label {
        font-size: 18px;
        font-weight: bold;
      }
      .search-form input[type=text] {
        font-size: 18px;
        height: 50px;
      }
      .search-form select {
        font-size: 18px;
        height: 50px;
      }
      @media (max-width: 767px) {
        .search-form h1 {
          font-size: 24px;
        }
        .search-form input[type=text], .search-form select {
          height: 40px;
        }
      }
     .card {
         box-shadow: 0 4px 8px 0 rgba(4, 1, 0, 0.2);
            border-radius: 30px;
            background-color: #fff;
            padding: 10px;
            margin-bottom: 20px;
            width: 500px;
            margin: 20px;
          }
           .card-img-top {
              border-radius: 1000px 50px 100 100;
              height: 200px;
              object-fit: cover;
              object-position: center top;
            }
            .card-title {
                font-weight: bold;
                font-size: 18px;
                margin-bottom: 10px;
            }
            .card-text {
                font-size: 14px;
                margin-bottom: 10px;
            }
            .card-link {
                font-size: 14px;
                color: #007bff;
            }
            .card-link:hover {
                text-decoration: none;
                color: #0056b3;
            }
.search-field {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}
.search-filters {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  margin: 10px;
}
.search-filters label {
  font-weight: bold;
  margin-right: 10px;
}
.parent-element {
  display: flex;
}
.search-form {
  background-color: #f6f6f6;
  border-radius: 0;
  border: 1px solid #ddd;
  flex-grow: 1; 
}
.search-field {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}
.search-field input[type="text"] {
  height: 50px;
  border-radius: 25px;
  font-size: 1.2rem;
  font-weight: 500;
  color: #555;
  padding: 10px 20px;
  margin-right: 10px;
  border: none;
  box-shadow: none;
  flex-grow: 1;
  margin-top:100000px
}
.search-field input[type="search"] {
  height: 50px;
  width: 600px;
  padding: 10px 20px;
  border-radius: 25px;
  border: 2px solid #ccc;
  margin-right: 10px;
  font-size: 1.2rem;
  color: #555;
  transition: all 0.3s ease-in-out;
  outline: none;
}
.search-field input[type="search"]::placeholder {
  font-size: 1.2rem;
  color: #555;
}
.search-field input[type="search"]:focus {
  border-color: #007bff;
  box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
}
.notification-icon {
  margin-left: 1240px;
  position: relative;
  display: inline-block;
}
.notification-icon .fa-bell {
  font-size: 24px;
}
.notification-icon .badge {
  position: absolute;
  top: -5px;
  right: -5px;
  font-size: 10px;
  font-weight: bold;
  line-height: 1;
  background-color: #dc3545;
  color: #fff;
  padding: 3px 5px;
  border-radius: 50%;
}
.notification-dropdown {
  background-color: #fff;
  border: 1px solid rgba(0, 0, 0, 0.125);
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  position: absolute;
  top: 100%;
  right: 0;
  width: 350px;
  z-index: 9999;
  overflow: auto;
  max-height: 400px;
}
.notification-dropdown::-webkit-scrollbar {
  width: 6px;
}
.notification-dropdown::-webkit-scrollbar-track {
  background-color: #f5f5f5;
}
.notification-dropdown::-webkit-scrollbar-thumb {
  background-color: #dc3545;
}
.notification-dropdown .list-group-item {
  padding: 10px;
  font-size: 14px;
}
.notification-dropdown .list-group-item a {
  color: #dc3545;
}
.notification-dropdown .list-group-item:hover {
  background-color: #f5f5f5;
}
.notification-dropdown .list-group-item:hover a {
  color: #dc3545;
}
.notification-dropdown .no-notifications {
  padding: 10px;
  text-align: center;
}
.notification-hide {
  display: none;
}
.notification-icon .fa-bell.animated {
  animation: bell-animation 0.5s ease;
}
@keyframes bell-animation {
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(15deg);
  }
  100% {
    transform: rotate(-15deg);
  }
}
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom:10px;
  margin-right:200px;
}
</style>

{% endblock %}
{% block javascripts %}
    {{ parent() }}
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ asset('js/bootstrap.min.js') }}"></script>
     <script src="{{ asset('main.js') }}"></script>
   <script src="{{ asset('js/owl.carousel.min.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const notificationIcon = document.querySelector('#notification-icon');
  const notificationDropdown = document.querySelector('.notification-dropdown');
  notificationIcon.addEventListener('click', () => {
    if (notificationDropdown.classList.contains('notification-hide')) {
      notificationIcon.querySelector('.fa-bell').classList.add('animated');
      notificationDropdown.classList.remove('notification-hide');
      notificationDropdown.classList.add('notification-box');
    } else {
      notificationDropdown.classList.add('notification-hide');
      notificationDropdown.classList.remove('notification-box');
      setTimeout(() => {
        notificationIcon.querySelector('.fa-bell').classList.remove('animated');
      }, 500);
    }
  });
  
  const searchField = document.getElementById('search-field');
  const categoryField = document.getElementById('category-field');
  searchField.addEventListener('input', () => {
    submitForm();
  });
  categoryField.addEventListener('change', () => {
    submitForm();
  });
  function submitForm() {
    document.forms[0].submit();
  }
});
</script>

{% endblock %}

</head>
<body>
{% block body %}
  
   <div class="notification-icon" id="notification-icon">
  <a href="#">
    <i class="fa fa-bell animated"></i> <!-- Ajoutez la classe "animated" ici -->
    {% if notifications is not empty %}
    <span class="badge badge-pill badge-danger">{{ notifications|length }}</span>
    {% endif %}
  </a>
  <div class="notification-dropdown notification-hide">
    <ul class="list-group">
{% for notification in notifications %}
    {% if not notification.vu %}
        <li class="list-group-item">
            {% if notification.offre is not null %}
                <a href="{{ path('offres_show', {'offre': notification.offre}) }}">{{ notification.msg }}</a>
            {% else %}
                {{ notification.msg }}
            {% endif %}
            <form method="post" action="{{ path('notification_delete', {'id': notification.id}) }}" class="d-inline">
                <button type="submit" class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
            </form>
        </li>
    {% endif %}
{% endfor %}
    </ul>
  </div>
</div>



    </div>
  <div class="row">
{% for offre in pagination %}
  {% if offre.statut == 'ACCEPTED' %}
    <div class="card mb-3">
      <a href="{{ path('offres_show', {offre: offre.id}) }}">
        <div class="row no-gutters">
          <div class="col-md-4">
            {% if offre.logoPath is not empty %}
              <img src="{{ asset('Images/' ~ offre.logoPath) }}" class="card-img" alt="Offre image">
            {% else %}
              <img src="{{ asset('Images/default-offre.jpg') }}" class="card-img" alt="Default offre image">
            {% endif %}
          </div>
        </a>
        <div class="col-md-8">
          <div class="card-body">
            <h3 class="card-title">{{ offre.titre }}</h3>
            <p class="card-text">{{ offre.Etat }}</p>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Compétence 1: {{ offre.skill1 }}</li>
              <li class="list-group-item">Compétence 2: {{ offre.skill2 }}</li>
              <li class="list-group-item">Compétence 3: {{ offre.skill3 }}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
{% endfor %}
  </div>
  <div class="pagination">
  {% set currentPage = pagination.getCurrentPageNumber() %}
  {% set totalPages = pagination.getTotalItemCount() / pagination.getItemNumberPerPage()|round(0, 'ceil') %}
  
  {% if currentPage > 1 %}
    <a href="{{ path('app_offres', { page: currentPage - 1 }) }}" class="page-link"> <i class="fas fa-angle-left text-blue px-3"></i> Page Précédente</a>
  {% endif %}
  
  {% if currentPage < totalPages %}
    <a href="{{ path('app_offres', { page: currentPage + 1 }) }}" class="page-link">Page Suivante <i class="fas fa-angle-right text-blue px-3"></i></a>
  {% endif %}
</div>
    {% endblock %}
</body>
</html>
{% endblock %}