{% extends 'base.html.twig' %}

{% block javascripts %}
{{ parent() }}
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ asset('css/bootstrap.min.js') }}"></script>
     <script src="{{ asset('js/main.js') }}"></script>
   <script src="{{ asset('js/owl.carousel.min.js') }}"></script>
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/easing.min.js"></script>
    <script src="js/waypoints.min.js"></script>
    <script src="js/counterup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="main.js"></script>
   <script src="{{ asset('js/owl.carousel.js') }}"></script>
    <script src="{{ asset('js/owl.carousel.js') }}"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js"></script>

<!-- jQuery UI -->


<!-- Configuration de l'éditeur TinyMCE -->
<script>
  tinymce.init({
    selector: '#{{ form.description.vars.id }}',
    plugins: 'lists link image',
    toolbar: 'undo redo | bold italic underline strikethrough | numlist bullist | link image',
    menubar: false
  });
  const form = document.querySelector('form');
  const submitBtn = document.querySelector('.btn-modifier');
  const datepicker = document.querySelector('.datepicker');
  submitBtn.disabled = true;
  datepicker.addEventListener('change', () => {
    submitBtn.disabled = false;
  });
  form.addEventListener('input', () => {
    submitBtn.disabled = false;
  });
 $(document).ready(function() {
  $('.datepicker').datepicker({
    dateFormat: 'yy-mm-dd',
    changeMonth: true,
    changeYear: true,
    yearRange: "-100:+0",
   
    beforeShow: function(input, inst) {
      $(inst.dpDiv).addClass("animate__animated animate__fadeIn"); 
    }
  });
  });
    document.querySelector('.btn-modifier').addEventListener('click', function(e) {
    if (!confirm('Êtes-vous sûr de vouloir modifier ?')) {
      e.preventDefault();
    }
  });
</script>
{% endblock %}
{% block body %}
    <title>{% block title %}Modifier Offre{% endblock %}</title>

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="{{ asset('css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/owl.theme.default.min.css') }}">
       <link rel="stylesheet" href="{{ asset('style.css') }}">

<style>
.form {
    margin-top: 30px;
}
.card-header {
 
    color: #fff;
    font-size: 28px;
    font-weight: bold;
    text-align: center;
    padding: 25px;
  }
.form-control:focus {
    border-color: #5cb3fd;
    box-shadow: none;
}
.form-control::-moz-placeholder {
    color: #7f8c8d;
    opacity: 1;
}
.form-control:-ms-input-placeholder {
    color: #7f8c8d;
}
.form-control::-webkit-input-placeholder {
    color: #7f8c8d;
}
.form-group {
    margin-bottom: 20px;
}
.form-label {
    font-weight: bold;
    margin-bottom: 10px;
}
.card {
    border: none;
    box-shadow: 0 2px 15px 0 rgba(0, 0, 0, 0.05);
}
.card-title {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 30px;
}
.btn-primary {
    background-color: #002147;
    border-color: #002147;
}
.btn-primary:hover {
    background-color: #002147;
    border-color: #002147;
}
.btn-animation {
    animation: none;
    transition: transform 0.5s ease;
    background-color: #0d0238;
    color: #fff;
    padding: 15px 30px;
    border: none;
    border-radius: 4px;
    font-size: 18px;
    font-weight: 600;
}
.btn-animation:hover {
    animation: pulse 1s infinite;
    background-color: #A1C7E0;
}
@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}
    .is-invalid {
        border-color: red;
        transition: border-color 0.10s ease-in-out;
    }
    .animated {
          animation-duration: 0.8s;
          transition: transform 0.5s ease-in-out;
    }
    .shake {
        animation-name: shake;
    }
    @keyframes shake {
        0% {
            transform: translate(0, 0);
        }
        20% {
            transform: translate(-10px, 0);
        }
        40% {
            transform: translate(10px, 0);
        }
        60% {
            transform: translate(-10px, 0);
        }
        80% {
            transform: translate(10px, 0);
        }
        100% {
            transform: translate(0, 0);
        }
    }
</style>
{% endblock %}
 <div class="container h-100">
  <div class="row justify-content-center h-100">
    <div class="col-md-7">
      <div class="card h-100">
        <div class="card-header">
          <h1 class="text-center">Modifier une offre</h1>
        </div>
       {{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': ''}}) }}
                <div class="form-group">
                  {{ form_label(form.titre) }}
                  {{ form_widget(form.titre, {'attr': {'class': 'form-control' ~ (form.titre.vars.errors|length ? ' is-invalid animated shake' : ''), 'placeholder': 'Titre', 'onchange': 'removeErrorClass(this)'}}) }}
                  {{ form_errors(form.titre, {'attr': {'class': 'form-control is-invalid animated shake'}}) }}
                </div>
                   <div class="form-group"> 
                    {{ form_widget(form.description, {'attr': {'class': 'tinymce form-control' ~ (form.description.vars.errors|length ? ' is-invalid animated shake' : ''), 'placeholder': 'Description de l\'offre', 'style': 'height: 150px'}})|raw }}
                     {{ form_errors(form.description, {'attr': {'class': 'form-control is-invalid animated shake'}}) }}
                    </div>
                    <div class="form-group">
                        {{ form_label(form.categorie) }}
                        {{ form_widget(form.categorie, {'attr': {'class': 'form-control'~ (form.categorie.vars.errors|length ? ' is-invalid animated shake' : ''), 'placeholder': 'choisie une catégorie'}}) }}
                        {{ form_errors(form.categorie, {'attr': {'class': 'form-control is-invalid animated shake'}}) }}
                    </div>
                    <div class="form-group">
                        {{ form_label(form.skill1) }}
                        {{ form_widget(form.skill1, {'attr': {'class': 'form-control'~ (form.skill1.vars.errors|length ? ' is-invalid animated shake' : ''), 'placeholder': 'Compétence1...'}}) }}
                        {{ form_errors(form.skill1, {'attr': {'class': 'form-control is-invalid animated shake'}}) }}
                    </div>
                    <div class="form-group">
                        {{ form_label(form.skill2) }}
                        {{ form_widget(form.skill2, {'attr': {'class': 'form-control'~ (form.skill2.vars.errors|length ? ' is-invalid animated shake' : ''), 'placeholder': 'Compétence2...'}}) }}
                        {{ form_errors(form.skill2, {'attr': {'class': 'form-control is-invalid animated shake'}}) }}
                    </div>
                    <div class="form-group">
                        {{ form_label(form.skill3) }}
                        {{ form_widget(form.skill3, {'attr': {'class': 'form-control'~ (form.skill3.vars.errors|length ? ' is-invalid animated shake' : ''), 'placeholder': 'Compétence3...'}}) }}
                        {{ form_errors(form.skill3, {'attr': {'class': 'form-control is-invalid animated shake'}}) }}
                    </div>              
                      <div class="form-group">
                        {{ form_label(form.dl) }}
                        {{ form_widget(form.dl, {'attr': {'class': 'datepicker form-control' ~ (form.skill3.vars.errors|length ? ' is-invalid animated shake' : ''), 'placeholder': 'Compétence3...'}}) }}
                        {{ form_errors(form.dl, {'attr': {'class': 'form-control is-invalid animated shake'}}) }}
                      </div>
                    <div class="form-group">
                        {{ form_label(form.dc) }}
                       {{ form_widget(form.dc, {'attr': {'class': 'form-control', 'disabled': 'disabled'}}) }}
                      </div>
                    <div class="d-flex justify-content-center align-items-center">
                   <div class="form-group button-group">
                          <a href="{{ path('offres_show', {'offre': offre.id}) }}" class="btn btn-primary btn-animation">Annuler</a>
                          <button type="submit" class="btn btn-primary btn-animation btn-modifier" onclick="return confirm('Êtes-vous sûr de vouloir modifier ?')">Modifier</button>
                        </div>
                        </div>
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
</div>



{% endblock %}